# Лабораторная работа 5
## Введение

На GitHub создал репозиторий с именем lab52. На компьютере в папке сохранил локальную копию репозитория:
```
git clone https://github.com/dellup/lab52
cd lab52
```
Создав в папке текстовый файл, добавлю в него текст и добавлю изменения в репозиторий, введя команды:
```
git add ex.txt
git commit -m "File added ex.txt"
git push origin main
```

Далее создал ветку и переключился на нее:
```
git branch feature-branch
git checkout feature-branch
```
В ветку feature-branch добавим файл, в котором добавим к старому тексту еще текст.
```
git add ex.txt
git commit -m "Edit file added ex.txt"
git push origin feature-branch
```

Переключившись на основную ветку, сольем изменения в основную ветку из ветки feature-branch:
```
git checkout main
git merge feature-branch
git push origin main
```

Изменения успешно слиты.

## Работа с ветками
Создам текстовый файл с базовой структурой книги:
```
# Название книги

## Глава 1: Введение
Здесь будет введение в тему книги.

## Глава 2: Основы Git
Основные понятия и команды Git.
```

Создам новую ветку и сразу переключусь на нее:
```
git checkout -b feature-login
```
Внесу изменения в файл:
```
# Название книги

## Глава 1: Введение
Здесь будет введение в тему книги.

## Глава 2: Основы Git
Основные понятия и команды Git.

## Глава 3: Вход в систему
Раздел по новой функциональности входа в систему.
```
Завершу изменения и отправлю их на GitHub в ветку:
```
git add README.md
git commit -m "Добавлена глава 3: Вход в систему"
git push origin feature-login
```
## Работа с удаленным репозиторием

Переключусь на основную ветку и внесу изменения в основной ветке:

```
git checkout main
```

```
# Название книги: Приключения в мире Git

## Глава 1: Введение
Здесь будет введение в удивительный мир Git.

## Глава 2: Основы Git
Основные понятия и команды Git.

```

Сделаю коммит изменений и отправлю их на GitHub:

```
git add README.md
git commit -m "Изменено название книги и введение"
git push origin main

```
## Моделирование конфликта

Вернусь в ветку "feature-login" и внесу изменения в том же участке:

```
git checkout feature-login
```

```
# Название книги: Приключения в мире Git

## Глава 1: Введение
Здесь будет введение в удивительный мир Git.

## Глава 2: Основы Git и магия конфликтов
Основные понятия и команды Git, а также волшебство разрешения конфликтов.

```
Сделаю коммит изменений и отправлю их на GitHub:

```
git add README.md
git commit -m "Добавлен раздел о магии конфликтов"
git push origin feature-login

```
## Разрешение конфликта
Вернусь в основную ветку и солью изменения:

```
git checkout main
git merge feature-login
```

2. Возникнет конфликт. В самом файле появляется такой текст:

```
# Название книги: Приключения в мире Git

## Глава 1: Введение
Здесь будет введение в удивительный мир Git.

<<<<<<< HEAD
## Глава 2: Основы Git и магия конфликтов
Основные понятия и команды Git, а также волшебство разрешения конфликтов.
======= 
## Глава 2: Основы Git
Основные понятия и команды Git. 
>>>>>>> feature-login

```
В консоли выводит такие сообщения:

![screen2](https://github.com/cs-itmo-2023/lab-5-dellup/blob/main/5.png)


Разрешу конфликт, удалив метки и оставив нужные изменения:

```
# Название книги: Приключения в мире Git

## Глава 1: Введение
Здесь будет введение в удивительный мир Git.

## Глава 2: Основы Git и магия конфликтов
Основные понятия и команды Git, а также волшебство разрешения конфликтов.
```
Сделаю коммит разрешения конфликта и отправлю изменения на GitHub:

```
git add README.md
git commit -m "g"
git push origin main
```
## Автоматизация проверки файлов при коммите
Поставлю перед собой задачу при коммите знать, содержимое файла является книгой или нет, проверяя, есть ли в ней подстрока "Глава 1: ".
В папке .git/hooks в файл pre-commit добавлю следующий скрипт на bash:
```
#!/bin/bash
if grep -q "Глава 1: " ex.txt
 then echo "Это книга"
else
 echo "Это точно не книга"
fi
```

![screen1](https://github.com/cs-itmo-2023/lab-5-dellup/blob/main/4.png)

Теперь при коммите файла в консоли выводится соответствующее сообщение.
## Использование Git Flow в проекте
В корне репозитория выполню инициализацию Git Flow.

```
git flow init
```
Создам ветку для новой функциональности "task-management":

```
git flow feature start task-management
```
Внесу изменения в код для добавления функционала управления задачами (например, в файл task_manager.py):

```
def create_task(title):
    # Логика создания задачи
    print(f"Создана новая задача: {title}")
```

Выполню коммит изменения по мере разработки:

```
git add task_manager.py
git commit -m "Добавлен функционал управления задачами"

```

После завершения разработки функции завершу фичу и объединю ее с основной веткой:

```
git flow feature finish task-management

```

Git Flow автоматически переключится на ветку dev и выполнит слияние.

Переключусь на ветку "dev" и начните создание релиза:

```
git checkout dev
git flow release start v1.0.0
```

Обновлю версию в файле version.txt:

```
echo "v1.0.0" > version.txt
git add version.txt
git commit -m "Обновлена версия для релиза v1.0.0"

```
Завершу релиз и объединю его с ветками "dev" и "main":

```
git flow release finish v1.0.0
```

Для исправления критических ошибок создам hotfix:

```
git flow hotfix start hotfix-1.0.1
```
Внесу изменения для исправления ошибки и сделаю коммит:

```
# Исправление ошибки
git add file_with_error.py
git commit -m "Исправлена критическая ошибка"
```

Завершите hotfix и объединю его с ветками "develop" и "main":

```
git flow hotfix finish hotfix-1.0.1
```

Завершу работу и отправлю изменения на удаленный репозиторий:

```
git push origin develop
git push origin main

```
![screen3](https://github.com/cs-itmo-2023/lab-5-dellup/blob/main/6.png)
